\documentclass[a4paper]{article}

\usepackage[lutzsyntax]{virginialake}
%\usepackage[urw-garamond]{mathdesign} % Comment this to use Times fonts
%  \expandafter\ifx\csname leqslant\endcsname\relax\usepackage{txfonts}\fi
\usepackage[pdfborder={0 0 0}]{hyperref}
%\usepackage[dvipsnames,usenames]{color}
%\usepackage{draftwatermark}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{stmaryrd}
\usepackage{a4wide}

\hyphenation{co-weak-en-ing}
\hyphenation{La-mar-che}
\hyphenation{quasi-poly-no-mial}

\renewcommand{\le}{\leqslant}
\renewcommand{\ge}{\geqslant}


\begin{document}

\title{Strongly Normalising Explicit Substitution for Intuitionistic and Classical Logic}

\author{Tom Gundersen and Michel Parigot}

\maketitle
% 
% A `path' through an atomic flow is the traditional `ai-path' (i.e. we dissalow the two `up' (resp., `down') edges of a (co)contraction from being adjacent), with the following restriction:
% 
% For every medial instance
% \[
% \vlinf{}{}
% {\vls([A.C].[B.D])}
% {\vls[(A.B).(C.D)]}
% \]
% every path that passes through both A and D or both B and C are discarded.
% 
% \begin{itemize}
% \item Theorem: the `tamer' of `Breaking Paths...' preserves these kind of paths (it has been keeping me up at night that the tamer does not preserve the normal paths ever since I first noticed it back in Bath).
% \item (Very strong) conjucture: These paths are preserved by $\beta$-reduction (in both $\lambda$ and $\lambda\mu$ calculus)
% \item Conjecture (working exactly what I have been trying to prove with Lutz): any flow where all these paths are acyclic* corresponds to a valid classical logic proof (and a suitable restriction will give a intutionistic logic proof).
% \end{itemize}
% *) we do as Retore and we connecte edges that are in disjunctions (resp., conjuncions) in the premiss (resp., conclusion).

\newcommand{\FV}{\mathop{FV}}

\paragraph{Terms}
\begin{itemize}
 \item $x$
 \item $\lambda x.u, x\in\FV(u)$
 \item $(u)t, \FV(u)\cap\FV(t)=\emptyset$
 \item $u[\leftarrow t], \FV(u)\cap\FV(t)=\emptyset$
 \item $u[x,y\leftarrow t], \FV(u)\cap\FV(t)=\emptyset, x,y\in\FV(u)$
 \item $u[\leftarrow \lambda x.\epsilon[\vec x_1\leftarrow t_1]\dots[\vec x_n\leftarrow t_n]], \mbox{same conditions apply}$
 \item $u[z_1,z_2\leftarrow \lambda y.<v_1,v_2>[\vec x_1\leftarrow t_1]\dots[\vec x_2\leftarrow t_n]], \mbox{same conditions apply}$
\end{itemize}

where $\vec x_i$ stands for either two variables or no variables.

Substitution, which is always linear, is denoted $u\{x\leftarrow t\}$, and is defined modulo $\alpha$-conversion to avoid capturing variables, as is the norm.

\paragraph{Typing}

\begin{itemize}
 \item $A^x$
 \item $\vlinf{}{}{A^x\;\;\vlim\;\;\vlder{}{u}{B}{\vls(A.\Gamma)}}{\Gamma}$
 \item $\vlinf{}{}{B}{\vls(\vlder{}{t}{A}{\Delta}\;\;.\;\;\vlder{}{u}{A\vlim B}{\Gamma})}$
 \item $\vlder{}{u}{B}{\vlsbr(\vlderivation{\vlin{}{}{\vls(A^{x_1}_1.A^{y_1}_1)}{\vlde{}{t_1}{A_1}{\vlhy{\Gamma_1}}}}\;\;\;.\;\;\;\cdots\;\;\;.\;\;\;\vlderivation{\vlin{}{}{\vls(A^{x_n}_n.A^{y_n}_n)}{\vlde{}{t_n}{A_n}{\vlhy{\Gamma_n}}}}\;\;\;.\;\;\;\vlderivation{\vlin{}{}{\top}{\vlde{}{t'_1}{A'_1}{\vlhy{\Gamma'_1}}}}\;\;\;.\;\;\;\cdots\;\;\;.\;\;\;\vlderivation{\vlin{}{}{\top}{\vlde{}{t'_m}{A'_m}{\vlhy{\Gamma'_m}}}}\;\;\;.\;\;\;\Delta)}$
 \item $\vlder{}{u}{B}{\vlsbr(\vlderivation{\vlin{}{}{\top}{\vlin{}{}{A^x\;\;\vlim\;\;\vlinf{=}{}{\vlsbr(\vlderivation{\vlin{}{}{\top}{\vlde{}{t_1}{A_1}{\vlhy{\Gamma_1}}}}\;\;\;.\;\;\;\cdots\;\;\;.\;\;\;\vlderivation{\vlin{}{}{\top}{\vlde{}{t_n}{A_n}{\vlhy{\Gamma_n}}}})}{\vls(A.\Gamma)}}{\vlhy{\Gamma}}}}\;\;\;.\;\;\;\Delta)}$
 \item $\vlder{}{u}{B}{\vlsbr(\vlinf{}{}{\vls([A\vlim B_1]^{x_1}.[A\vlim B_2]^{x_2})}
{\vlinf{}{}{A^y\;\;\;\;\;\;\;\vlim\;\;\;\;\;\;\;
\vlinf{=}{}{\vls(\vlder{}{v_1}{B_1}{\Delta_1}\;\;.\;\;\vlder{}{v_2}{B_2}{\Delta_2})}{\vlinf{=}{}{\vlsbr(\vlderivation{\vlin{}{}{\vls(A^{y_1}_1.A^{z_1}_1)}{\vlde{}{t_1}{A_1}{\vlhy{\Gamma_1}}}}\;\;\;.\;\;\;\cdots\;\;\;.\;\;\;\vlderivation{\vlin{}{}{\vls(A^{y_1}_n.A^{z_1}_n)}{\vlde{}{t_1}{A_n}{\vlhy{\Gamma_n}}}}\;\;\;.\;\;\;\Delta')}{\vls(A.\Gamma)}}
}{\Gamma}}\;\;\;\;\;\;\;.\;\;\;\;\;\;\;\Delta)}$
\end{itemize}

\paragraph{Denotation}
\begin{itemize}
 \item $\llbracket x\rrbracket=x$
 \item $\llbracket\lambda x.u\rrbracket=\lambda x.\llbracket u\rrbracket$
 \item $\llbracket(u)t\rrbracket = (\llbracket u\rrbracket)\llbracket t\rrbracket$
 \item $\llbracket u[\leftarrow t]\rrbracket = \llbracket u\rrbracket$
 \item $\llbracket u[x,y\leftarrow t]\rrbracket = \llbracket u\rrbracket\{x,y\leftarrow\llbracket t\rrbracket\}$
 \item $\llbracket u[\leftarrow \lambda x.\epsilon[\vec x_1\leftarrow t_1]\dots[\vec x_n\leftarrow t_n]]\rrbracket = \llbracket u\rrbracket$
 \item $\llbracket u[z_1,z_2\leftarrow \lambda y.<v_1,v_2>[\vec x_1\leftarrow t_1]\dots[\vec x_2\leftarrow t_n]]\rrbracket=\llbracket u\rrbracket\{z_1\leftarrow \lambda y.\llbracket v_1\rrbracket\{\vec x_1\leftarrow \llbracket t_1\rrbracket\}\dots\{\vec x_2\leftarrow \llbracket t_n\rrbracket\}\}\{z_2\leftarrow \lambda y.\llbracket v_2\rrbracket\{\vec x_1\leftarrow \llbracket t_1\rrbracket\}\dots\{\vec x_2\leftarrow \llbracket t_n\rrbracket\}\}$
\end{itemize}

\paragraph{Reduction}

\begin{itemize}
 \item $(\lambda x.u)t \rightsquigarrow_\beta u\{x\leftarrow t\}$
\end{itemize}

$u[\leftarrow t] \rightsquigarrow_w^\star u[\leftarrow x_1]\dots[\leftarrow x_n], \{x_1,\dots,x_n\}=\FV(t)$
\begin{itemize}
 \item $u[\leftarrow \lambda x.t] \rightsquigarrow_w u[\leftarrow \lambda x.\epsilon[\leftarrow t]]$
 \item $u[\leftarrow (t)v] \rightsquigarrow_w u[\leftarrow t][\leftarrow v]$
 \item $u[\leftarrow t[\leftarrow v]] \rightsquigarrow_w u[\leftarrow t][\leftarrow v]$
 \item $u[\leftarrow t[x,y\leftarrow v]] \rightsquigarrow_w u[\leftarrow t][x,y\leftarrow v]$
 \item $u[\leftarrow x][z,y\leftarrow t] \rightsquigarrow_w u[z,y\leftarrow t][\leftarrow x]$
 \item $u[\leftarrow x][x,y\leftarrow t] \rightsquigarrow_w u\{y\leftarrow t\}$
 \item $\lambda x.(u[\leftarrow y][\leftarrow x]) \rightsquigarrow_w \lambda x.(u[\leftarrow x][\leftarrow y])$
 \item $\lambda x.(u[\leftarrow y]) \rightsquigarrow_w (\lambda x.u)[\leftarrow y]$
 \item $u[\leftarrow (\lambda x.\epsilon[\leftarrow x])] \rightsquigarrow_w u$
\end{itemize}

$u[x,y\leftarrow t] \rightsquigarrow_c^\star u\{x\leftarrow t'\}\{y\leftarrow t''\}[x_1,y_1\leftarrow z_1]\dots[x_1,y_1\leftarrow z_n], \{x_1,\dots,x_n\}=\FV(t'), \{y_1,\dots,y_n\}=\FV(t''), \{z_1,\dots,z_n\}=\FV(t), t=_\alpha t'=_\alpha =t''$
\begin{itemize}
 \item $u[z_1,z_2\leftarrow \lambda y.t] \rightsquigarrow_c u[z_1,z_2\leftarrow \lambda y.<x_1,x_2>[x_1,x_2\leftarrow t]]$
 \item $u[x_1,x_2\leftarrow (t)v] \rightsquigarrow_c u\{x_1\leftarrow (y_1)z_1\}\{x_2\leftarrow (y_2)z_2\}[y_1,y_2\leftarrow t][z_1,z_2\leftarrow v]$
 \item $u[x,y\leftarrow t[\leftarrow v]] \rightsquigarrow_c u[x,y\leftarrow t][\leftarrow v]$
 \item $u[x_1,x_2\leftarrow t[y_1,y_2\leftarrow v]] \rightsquigarrow_c u[x_1,x_2\leftarrow t][y_2,y_2\leftarrow v]$
 \item $\lambda x.(u[z_1,z_2\leftarrow y]) \rightsquigarrow_c (\lambda x.u)[z_1,z_2\leftarrow y]$
 \item $u[x_1,x_2\leftarrow z_1][y_1,y_2\leftarrow z_2]=u[x_1,x_2\leftarrow z_1][y_1,y_2\leftarrow z_2]$
 \item $<v_1,v_2>[x,y\leftarrow z] \rightsquigarrow_c <v_1[x,y\leftarrow z],v_2>, x,y\in\FV(v_1)$
 \item $<v_1,v_2>[x_1,y_1\leftarrow z_1][x_2,y_2\leftarrow z_2][z_1,z_2\leftarrow q] \rightsquigarrow_c <v_1[x_1,x_2\leftarrow z_1],v_2[y_1,y_2\leftarrow z_2]>[z_1,z_2\leftarrow q], x_1,x_2\in\FV(v_1), y_1,y_2\in\FV(v_2)$
 \item $<v_1,v_2>[x,y\leftarrow z_1][z_1,z_2\leftarrow q] \rightsquigarrow_c <v_1[x,z_2\leftarrow z_1],v_2>[z_1,y\leftarrow q], x,z_2\in\FV(v_1), y\in\FV(v_2)$
 \item $u[x_1,x_2\leftarrow (\lambda y.<t_1,t_2>[y_1,y_2\leftarrow y])] \rightsquigarrow_c u\{x_1\leftarrow \lambda y_1.t_1, x_2\leftarrow \lambda y_2.t_2\}$
 \item $u[x_1,x_2\leftarrow (\lambda y.<t_1,t_2>[\leftarrow y])] \rightsquigarrow_c u\{x_1\leftarrow \lambda y.t_1[\leftarrow y], x_2\leftarrow \lambda y.t_2[\leftarrow y]\}$
\end{itemize}

%\begin{lemma}
 If $u\rightsquigarrow_\beta v$, then $\llbracket u\rrbracket \rightsquigarrow_\beta \llbracket v\rrbracket$.
%\end{lemma}

%\begin{lemma}
 If $u\rightsquigarrow v$, then $\llbracket u\rrbracket = \llbracket v\rrbracket$
%\end{lemma}

%\begin{lemma}
 If $\llbracket u\rrbracket \rightsquigarrow_\beta \llbracket v\rrbracket$ then there exists a $t$, such that $u\rightsquigarrow^\star t$ and $t\rightsquigarrow_\beta v$.
%\end{lemma}


\end{document}

\paragraph{Interaction}

\[
\vlinf{}{}{B}{\vls(\vlder{}{}{A}{\Delta}\;\;.\;\;\vlinf{}{}{A\;\;\vlim\;\;\vlder{}{}{B}{\vls(A.\Gamma)}}{\Gamma})}
\quad\rightarrow\quad
\vlder{}{}{B}{\vlsbr(\vlder{}{}{A}{\Delta}\;\;.\;\;\Gamma)}
\]

\paragraph{Weakening}

\[
\vlinf{}{}{\vls(A\;.\;\vlinf{}{}{\top}{A})}{A}
\quad\rightarrow\quad
A\qquad
\vlinf{}{}{\vls([A\vlim B]\;.\;\vlinf{}{}{\top}{[A\vlim C]})}{\vls[A\vlim(B.C)]}
\quad\rightarrow\quad
\vls[A\vlim(B\;.\;\vlinf{}{}{\top}{C})]\qquad
\]
\[
\vlderivation
{
  \vlin{}{}{\top}
  {
    \vlin{}{}{B}{\vlhy{\vls(\vlder{}{}{A}{\Gamma}\;\;.\;\;\vlder{}{}{A\vlim B}{\Delta})}}
  }
}\quad\rightarrow\quad
\vlinf{}{}{\top}{\vls(\vlder{}{}{A}{\Gamma}\;\;.\;\;\vlder{}{}{A\;\vlim\;\vlinf{}{}{\top}{B}}{\Delta})}
\]
\[
\vlderivation
{
  \vlin{}{}{\top}
  {
    \vlin{}{}{A\;\;\vlim\;\;\vlder{}{}{B}{\vls(A.\Gamma)}}{\vlhy\Gamma}
  }
}\quad\rightarrow^\star\quad
\vlderivation
{
  \vlin{}{}{\top}
  {
    \vlin{}{}{A\;\;\vlim\;\;\vlderivation{\vlin{}{}{\top}{\vlde{}{}{B}{\vlhy{\vls(A.\Gamma)}}}}}{\vlhy\Gamma}
  }
}\qquad
\vlderivation
{
  \vlin{}{}{\top}
  {
    \vlin{}{}{A\;\;\vlim\;\;\vlinf{}{}{\top}{\vls(A.\Gamma)}}{\vlhy\Gamma}
  }
}\quad\rightarrow\quad
\vlinf{}{}{\top}{\Gamma}\qquad
\]

$\star$) $B\neq\top$.

\paragraph{Contraction}

\[
\vlderivation
{
  \vlin{}{}{\vls(B.B)}
  {
    \vlin{}{}{B}{\vlhy{\vls(\vlder{}{}{A}{\Gamma}\;\;.\;\;\vlder{}{}{A\vlim B}{\Delta})}}
  }
}\quad\rightarrow\quad
\vlinf{}{}{B}{\vls(\vlder{}{}{A}{\Gamma}\;\;.\;\;\vlder{}{}{A\;\vlim\;\vlinf{}{}{\vls(B.B)}{B}}{\Delta})}
\]
\[
\vlinf{}{}{\vls([A\vlim B].[A\vlim B])}{A\vlim B}
\quad\rightarrow\quad
\vlinf{}{}{\vls([A\vlim B].[A\vlim B])}{A\;\vlim\;\vlinf{}{}{\vls(B.B)}{B}}
\]
\[
\vlderivation
{
  \vlin{}{}{\vls([A\vlim B].[A\vlim C])}
  {
    \vlin{}{}{A\;\;\vlim\;\;\vlinf{}{}{\vls(\vlder{}{}{B}{\vls(A.\Gamma)}\;\;.\;\;\vlder{}{}{C}{\vls(A.\Gamma)})}{\vls(A.\Gamma)}}{\vlhy\Gamma}
  }
}\quad\rightarrow\quad
\vlinf{}{}{\vls(\vlinf{}{}{\vls[A\;\;\vlim\;\;\vlder{}{}{B}{\vls(A.\Gamma)}]}{\Gamma}\;\;.\;\;\vlinf{}{}{\vls[A\;\;\vlim\;\;\vlder{}{}{C}{\vls(A.\Gamma)}]}{\Gamma})}{\Gamma}\qquad
\]
\end{document}